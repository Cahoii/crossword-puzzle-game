rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Áp dụng cho collection 'completions' của bạn
    match /completions/{docId} {
    
      // CHẶN tất cả mọi người (kể cả bạn) đọc, sửa, hoặc xóa dữ liệu
      // từ phía client.
      allow read, update, delete: if false;
      
      // CHỈ CHO PHÉP người dùng 'create' (tạo mới) một bản ghi
      // Điều này cho phép hàm handleGuessKeyword() của bạn hoạt động
      // (Nó chỉ 'addDoc', tức là 'create')
      allow create: if request.resource.data.team is string &&
                       request.resource.data.finalScore is number &&
                       request.resource.data.status is string;
    }
  }
}